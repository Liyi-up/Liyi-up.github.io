
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NodeJS-快速上手 - Liyi&#39;s personal blog</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="前端开发,"> 
    <meta name="description" content="A Programmer,Node.js简介
Node.js是一个能够在服务器端运行的javaScript的开放源代码,跨平台javaScript运行环境

Node采用Google开发的V8引擎运行js代码,使用事件驱动、,"> 
    <meta name="author" content="Liyi"> 
    <link rel="alternative" href="atom.xml" title="Liyi&#39;s personal blog" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

    
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">

    
    <script>var musiclist = ""</script>
    
<script src="/js/loadaplayer.js"></script>

    <!-- 引用依赖 -->
    
<link rel="stylesheet" href="/aplayer/dist/APlayer.min.css">

    
<script src="/aplayer/dist/APlayer.min.js"></script>
<script src="/js/Meting.min.js"></script>

    
<meta name="generator" content="Hexo 4.2.0"></head>


<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Liyi&#39;s personal blog</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/img/favicon.png" alt="" data-url="https://liyi-up.top">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">NodeJS-快速上手</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url('/img/cover.jpg') ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="/categories/Web"><b>「
                    </b>WEB<b> 」</b></a>
                
                十二月 11, 2020
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/2020/12/11/NodeJS-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/" title="NodeJS-快速上手" class="">NodeJS-快速上手</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>文章字数</i>
                    82k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>阅读约需</i>
                    1:14
                </span>
                
                
                
            </p>
            
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h2 id="Node-js简介"><a href="#Node-js简介" class="headerlink" title="Node.js简介"></a>Node.js简介</h2><ul>
<li><p>Node.js是一个能够在服务器端运行的javaScript的开放源代码,<font color="red">跨平台javaScript运行环境</font></p>
</li>
<li><p>Node采用Google开发的V8引擎运行js代码,使用事件驱动、非阻塞和异步I/o模型等技术来提高性能，可以优化应用程序的传输和规模</p>
</li>
<li><p>Node大部分基本模块都用javaScript编写。在Node出现之前js通常作为客户端程序设计语言使用，以Js写出程序常在用户的浏览器上运行</p>
</li>
<li><p>目前，Node已被IBM，Microsoft、Yahoo！、Wakmart、Groupon、SPA、LinkedIn、Rakuten等企业采用</p>
<a id="more"></a>

</li>
</ul>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><ul>
<li>让 JavaScript 成为能够与PHP、Python 等平起平坐的语言</li>
<li>让前端脱离后端，直接通过  JS 写项目</li>
</ul>
<h2 id="模块化系统"><a href="#模块化系统" class="headerlink" title="模块化系统"></a>模块化系统</h2><h3 id="ECMAScript标准缺陷"><a href="#ECMAScript标准缺陷" class="headerlink" title="ECMAScript标准缺陷"></a>ECMAScript标准缺陷</h3><ul>
<li>没有模块系统</li>
<li>标准库较少</li>
<li>没有标准接口</li>
<li>缺乏管理系统</li>
</ul>
<h3 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h3><ul>
<li>如果程序设计的规模化达到了一定程度，则必须对其进行模块化</li>
<li>模块化可以有多种形式，单至少应该提供能够讲代码分割为多个源文件的机制</li>
<li>CommonJS的模块功能可以帮我们解决该问题</li>
</ul>
<h3 id="CommonJS-模块规范"><a href="#CommonJS-模块规范" class="headerlink" title="CommonJS 模块规范"></a>CommonJS 模块规范</h3><ul>
<li><p>CommonJs规范的提出，主要是为了弥补当前javascript没有标准的缺陷</p>
</li>
<li><p>CommonJS规范为JS制定了一个美好的愿景，希望JS能够在任何地方运行</p>
</li>
<li><p>CommonJS对模块的定义十分简单:</p>
<ul>
<li><p>模块引用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">module-1</span><br><span class="line">&#x2F;*</span><br><span class="line">   模块化</span><br><span class="line">   优点：解耦 提高代码复用性</span><br><span class="line">   - 在Node中，一个js就是一个模块</span><br><span class="line">   - 在Node中，每一个js文件中的js代码都是独立运行在一个函数中</span><br><span class="line">     而不是全局作用域，一个模块中的变量在其他模块中是无法使用和访问</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">console.log(&quot;我是module.js-02&quot;);</span><br><span class="line">let y &#x3D; 2;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 我们通过export来向外部暴露变量和方法</span><br><span class="line"> * 向外部暴露属性或者方法设置为exports的属性即可</span><br><span class="line"> *&#x2F;</span><br><span class="line">exports.x &#x3D; &quot;我是module中的x变量&quot;;</span><br><span class="line">exports.y &#x3D; y;</span><br><span class="line">exports.fn &#x3D; function () &#123;</span><br><span class="line">    console.log(&quot;我是module的函数&quot;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module-2</span><br><span class="line">&#x2F;*</span><br><span class="line">引入其他模块</span><br><span class="line">在node中，通过require()函数来引入外部模块</span><br><span class="line">require()可以传递一个文件的路径作为参数，node将会自动根据该路径来引入外部模块</span><br><span class="line">这里路径，如果使用相对路径，必须以.或..开头</span><br><span class="line"></span><br><span class="line">使用require引入模块后会返回一对象，这个对象代表的是我们引入的模块</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">var module &#x3D; require(&#39;.&#x2F;02.module&#39;);</span><br><span class="line">console.log(module);</span><br><span class="line">module.fn();</span><br></pre></td></tr></table></figure>
</li>
<li><p>模块定义</p>
</li>
<li><p>模块标识</p>
<blockquote>
<p>模块化标识就是模块的名字，也就是传递给require()方法的参数，它必符合驼峰命名法的字符串，或者是以.. 开头的相对路径，或者绝对路径</p>
<p>模块的定义十分简单，接口也十分简洁。每个模块都具有独立的空间，它们互不干扰，在引用时也显得干净利落。</p>
<p>模块分为两类<br><strong>核心模块</strong></p>
<p>由node引擎提供的模块</p>
<p>核心模块的标识就是，模块的名字<br><strong>文件模块</strong></p>
<p>由用户自己创建的模块</p>
<p>文件模块的标识就是文件的路径(绝对路径，相对路径)<br>相对路径使用.或..开头</p>
<p>tip:每一个模块都会被当作一个函数被node执行</p>
<p>当node在执行模块中的代码时，它会首先在代码的最顶部，添加如下代码</p>
<p>function (exports, require, module, __filename, __dirname) {</p>
<p>}</p>
<p>实际上模块中的代码都是包装在一个函数中执行，并在在函数执行的时候，同时包括5个实参</p>
<p><strong>exports</strong></p>
<p>该对象用于将变量或函数暴露到外部</p>
<p><strong>require</strong></p>
<p>函数，引入外部的模块</p>
<p><strong>module</strong></p>
<p>module代表当前模块本事</p>
<p>我们既可以使用exports也可以使用module.exports</p>
<p><strong>__filename</strong></p>
<p>当前模块的绝对路径</p>
<p><strong>__dirname</strong></p>
<p>当前模块所在文件夹的绝对路径</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="包-package"><a href="#包-package" class="headerlink" title="包 package"></a>包 package</h3><ul>
<li><p>CommonJS的包规范允许我们将一组相关的模块组合到一起，形成一组完整的工具</p>
</li>
<li><p>CommonJS的包规范由包结构和包描述文件两个部分组成</p>
</li>
<li><p>包结构</p>
<p>用于组织包中的各种文件</p>
</li>
<li><p>包描述文件</p>
<p>描述包的相关信息，以供外部读取分析</p>
</li>
</ul>
<h4 id="包结构"><a href="#包结构" class="headerlink" title="包结构"></a>包结构</h4><p>包实际上就是一个压缩文件，解压以后还原为目录。符合规范的目录，应该包含如下文件:</p>
<blockquote>
<ul>
<li><p>package.json 描述文件类似于包的简历(必须)</p>
<p>包描述文件用于表达非代码相关信息它是一个json格式的文件-package.json,位于包的根目录下，是包的重要组成部分</p>
<p><a href="https://www.cnblogs.com/mengfangui/p/11174583.html" target="_blank" rel="noopener">package.json字段</a></p>
</li>
<li><p>bin 可执行二进制文件</p>
</li>
<li><p>lib js代码</p>
</li>
<li><p>doc 文档</p>
</li>
<li><p>test 单元测试</p>
</li>
</ul>
</blockquote>
<h2 id="NPM-Node-Package-Manager"><a href="#NPM-Node-Package-Manager" class="headerlink" title="NPM(Node Package Manager)"></a>NPM(Node Package Manager)</h2><ul>
<li>CommonJS包规范是理论，NPM是其中一种实践</li>
<li>对于Node而言，NPM帮助其完成了第三方模块的发布，安装和依赖等。借助NPM。Node与第三方模块之间形成了很好的一个生态系统</li>
</ul>
<h3 id="npm命令"><a href="#npm命令" class="headerlink" title="npm命令"></a>npm命令</h3><h4 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- npm -v  查看版本</span><br><span class="line">- npm 帮助说明</span><br><span class="line">- npm search 包名  搜索模块包</span><br><span class="line">- npm install/i 包名 在当前目录安装包(全局安卓一般都是安装一些与计算机打交道的工具)</span><br><span class="line">- npm install/i 包名 -g 全局模式安装包</span><br><span class="line">- npm remove/r 包名 删除包</span><br><span class="line">- npm init 初始化模块包</span><br><span class="line">- npm install 包名 --save 安装并添加到模块依赖中</span><br></pre></td></tr></table></figure>

<h4 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm instal moduleName  [-g]           安装模块，有 -g 或 --global 是全局安装</span><br><span class="line">npm install packagename --save 或 -S                    --save、-S参数意思是把模块的版本信息保存到dependencies（生产环境依赖）中，即你的package.json文件的dependencies字段中；</span><br><span class="line">npm install packagename --save-dev 或 -D           --save-dev 、 -D参数意思是把模块安装到devDependencies（开发环境依赖）中，即你的package.json文件的devDependencies字段中</span><br><span class="line">npm install packagename --save-dev 或 -D           --save-optional 、 -O参数意思是把模块安装到optionalDependencies（可选环境依赖）中，即你的package.json文件的optionalDependencies字段中</span><br><span class="line">npm install packagename --save-exact 或 -E        --save-exact 、 -E参数的意思是精确的安装指定版本的模块，dependencies字段里每个模块版本号前面的 ^ 不见</span><br></pre></td></tr></table></figure>

<h4 id="更新包"><a href="#更新包" class="headerlink" title="更新包"></a>更新包</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm outdated  [-g] ：     列出所有已经过时了的模块</span><br><span class="line">npm update [-g] ：       更新已经安装的模块(或全局的模块)</span><br><span class="line">npm update packageName ：     更新某个模块</span><br><span class="line">npm update packName @version [options]       更新到指定版本, 带上原来安装的参数</span><br><span class="line">手动修改package.json中依赖包版本，执行npm install --force，强制从远程下载所有包更新本地包</span><br><span class="line">再次 执行 npm install packageName  , 覆盖安装到最新版本</span><br></pre></td></tr></table></figure>

<p><font color="red">npm-check 一个包 来检查呢npm 依赖包是否有更新，错误，不再使用等</font></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install npm-check -g</span><br><span class="line">npm-check -u -g</span><br></pre></td></tr></table></figure>

<h4 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall packagename [options]       卸载已经安装的模块，options参数与安装时候一样</span><br><span class="line">npm remove 、npm rm、npm r 、 npm un 、 npm unlink     这几个命令功能和npm uninstall基本一样</span><br></pre></td></tr></table></figure>

<h4 id="发布包"><a href="#发布包" class="headerlink" title="发布包"></a>发布包</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm publish        把在一个package.json文件中定义的模块发布到注册表</span><br><span class="line">npm unpublish myModule            取消发布您已发布到注册表的一个模块（在某些情况下，还需使用 --force 选项）</span><br></pre></td></tr></table></figure>

<h4 id="查看安装包的信息"><a href="#查看安装包的信息" class="headerlink" title="查看安装包的信息"></a>查看安装包的信息</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm list   [-g] 、 npm ll [-g] 、 npm la 、 npm ls   查看所有已经安装的模块详情</span><br><span class="line">npm info packageName (显示包的信息)</span><br><span class="line">npm ls packageName           查看本地安装包的版本号，empty表示没有安装过</span><br><span class="line">npm ls packageName -g      查看全局安装的包的版本号，empty表示没有安装过</span><br><span class="line">npm list packagename          查看某个模块的版本号</span><br><span class="line">npm view packageName      显示模块的详细信息</span><br><span class="line">npm view packageName version          查看某个包的最新版本号</span><br><span class="line">npm view packageName versions        查看某个包的所有版本号</span><br></pre></td></tr></table></figure>

<h3 id="npm源管理"><a href="#npm源管理" class="headerlink" title="npm源管理"></a>npm源管理</h3><ul>
<li>明确：通过npm命令下载会到国外服务器获取</li>
<li>缺点：下载速度慢</li>
<li>解决：切换国内服务器</li>
<li>简介：nrm是资源管理工具，可以切换国内服务器下载</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">安装：npm install nrm -g</span><br><span class="line">查看：nrm ls              	（注：单词list缩写，查看可用服务器）</span><br><span class="line">切换：nrm use 服务器名</span><br><span class="line">测速：nrm test</span><br></pre></td></tr></table></figure>

<h3 id="“模块”（Modules）和”包”（Packages）的区别"><a href="#“模块”（Modules）和”包”（Packages）的区别" class="headerlink" title="“模块”（Modules）和”包”（Packages）的区别"></a>“模块”（Modules）和”包”（Packages）的区别</h3><ol>
<li>A <strong>module</strong> is any file or directory that can be loaded by Node.js’ <code>require()</code>. </li>
</ol>
<ul>
<li>模块可以是任何一个文件或目录（目录下可以有很多个文件），只要能被node.js通过require()即可。</li>
</ul>
<ol start="2">
<li>A <strong>package</strong> is a file or directory that is described by a <code>package.json</code>. This can happen in a bunch of different ways!</li>
</ol>
<ul>
<li>包是一个文件或目录（目录下可以有多个文件）必须有一个package.json文件来描述，就可以是一个包。</li>
</ul>
<p>node.js 错误调试：</p>
<ol>
<li><p>当开启服务后，在浏览器中输入地址，如果出现浏览问题，首先要先看 服务器控制台是否报错。如果报错，直接根据服务器报错进行排错。</p>
</li>
<li><p>打开浏览器开发者工具中的 “网络” 部分，查看请求是否成功发出去了</p>
</li>
</ol>
<ul>
<li>看一下请求报文是不是和我们想的一样</li>
<li>响应状态码</li>
</ul>
<h3 id="npm-包自定义发布"><a href="#npm-包自定义发布" class="headerlink" title="npm 包自定义发布"></a>npm 包自定义发布</h3><p>1.创建工程，初始化后，修改 package.json 文件</p>
<p>2.打开 npmjs.com 注册账号</p>
<p>3.本地登录提交（切记提交自己的包必须切换到国外服务器，下载后再切换回来）</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/07/15/Wn3gnP.png" alt="自定义发布"></p>
<p>4.测试 执行命令 <code>npm install ${your npm package name}</code></p>
<h3 id="npm-版本号形式"><a href="#npm-版本号形式" class="headerlink" title="npm 版本号形式"></a>npm 版本号形式</h3><p>npm 版本号形式: <code>X.Y.Z</code></p>
<p>.X 主版本号：当你做了不兼容的 API 修改，<br>Y. 次版本号：当你做了向下兼容的功能性新增，<br>Z. 修订号：当你做了向下兼容的问题修正。</p>
<p><strong>版本号前的符号说明</strong></p>
<p>1.没有任何符号</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>

<p>完全百分百匹配，当前库/项目必须使用当前版本号，如果和其他依赖使用了相同库不同版本，会在库的文件夹下建立一个 node_modules 文件夹存放它需要依赖的版本文件。<br>2.&gt; (大于)<br>必须大于某个版本</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;1.0.0 ，可以使用 1.0.1、1.1.1 、2.0.0 的版本。</span><br></pre></td></tr></table></figure>

<p>3.&gt;=(大于等于)<br>必须大于或等于某个版本号</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;=1.0.0 ，可以使用 1.0.0、1.1.1 、2.0.0 的版本。</span><br></pre></td></tr></table></figure>

<p>4.&lt;(小于)<br>必须小于某个版本</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;2.0.0 ，可以使用 1.0.1、1.1.1 、1.1.9 的版本。</span><br></pre></td></tr></table></figure>

<p>5.&lt;=(小于等于)<br>必须小于或等于某个版本</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;=2.0.0 ，可以使用 1.0.1、1.1.1 、2.0.0 的版本。</span><br></pre></td></tr></table></figure>

<p>6.~<br>不改变主版本号和次版本号，修订号可以随意更改</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~2.0.0 ，可以使用 2.0.0、2.0.2 、2.0.9 的版本。</span><br></pre></td></tr></table></figure>

<p>7.^<br>不改变主版本号（主版本号非0），此版本号和修订号可以随意更改</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^2.0.0 ，可以使用 2.0.1、2.2.2 、2.9.9 的版本。</span><br></pre></td></tr></table></figure>

<p>8.x<br>x位置即后的位置可以随意（不用在主版本号上）。<br>例如 1.x 可以使用 1.0.1 、1.1.1 、1.9.1的版本。<br>例如 2.1.x 可以使用 2.1.1、2.1.9的版本</p>
<p>9.*<br>*表示任意版本 对版本没有限制， 一般不用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"base": "*"</span><br></pre></td></tr></table></figure>

<p>10.-</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"base": "1.0.1-1.5.9"</span><br></pre></td></tr></table></figure>

<p>1.0.1-1.5.9 可以使用 1.0.1到1.5.9之间的任意版本</p>
<h2 id="Buffer-模块"><a href="#Buffer-模块" class="headerlink" title="Buffer 模块"></a>Buffer 模块</h2><ul>
<li>从结构上看Buffer非常像一个数组，它的元素为16进制的两位数</li>
<li>实际上一个元素就标识内存中的一个字节。</li>
<li>世界上Buffer中的内存不是通过javaScript分配的，而是底层的C++申请的。</li>
<li>也就是我们可以直接通过Buffer来创建内存中的空间</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  Buffer(缓冲区)</span></span><br><span class="line"><span class="comment">   - Buffer的结构和数组很像，操作方法也和数组相似</span></span><br><span class="line"><span class="comment">   - js数组中不能存储二进制文件，而Buffer就是专门用于存储二进制文件的数组</span></span><br><span class="line"><span class="comment">   - 使用Buffer不需要引入模块，直接使用即可</span></span><br><span class="line"><span class="comment">   - 在Buffer中存储的都是二进制数据，但是显示时都是以16进制的形式显示</span></span><br><span class="line"><span class="comment">     Buffer中的每一个元素的大小是从00 -ff 0 -255</span></span><br><span class="line"><span class="comment">     00000000 - 11111111</span></span><br><span class="line"><span class="comment">     计算机中 一个0或一个1 我们称之为1位(bit）</span></span><br><span class="line"><span class="comment">     8bit =1byte(字节)</span></span><br><span class="line"><span class="comment">     1024bit = 1kb</span></span><br><span class="line"><span class="comment">     1024kb = 1mb</span></span><br><span class="line"><span class="comment">     1024mb = 1gb</span></span><br><span class="line"><span class="comment">     1024gb = 1tb</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   - Buffer的大小一旦确定，则不能修改，Buffer实际上是对内存的直接操作</span></span><br><span class="line"><span class="comment">   - Buffer.toString()直接将数据转换成字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"Hello"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将字符串保存到Buffer中</span></span><br><span class="line"><span class="comment">// var buffer1 = Buffer.from(str);</span></span><br><span class="line"><span class="comment">// // 一个中文占用3个字节</span></span><br><span class="line"><span class="comment">// console.log(buffer1.length);  // 占用内存大小</span></span><br><span class="line"><span class="comment">// console.log(str.length);  // 字符串的长度</span></span><br><span class="line"><span class="comment">// console.log(buffer1);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个指定大小的Buffer</span></span><br><span class="line"><span class="comment">// Buffer构造函数是不推荐使用的</span></span><br><span class="line"><span class="comment">// var buffer =  Buffer.alloc(10);</span></span><br><span class="line"><span class="comment">// // 通过索引，来操作buf中元素</span></span><br><span class="line"><span class="comment">// buffer[0] = 88;</span></span><br><span class="line"><span class="comment">// buffer[1] = 255;</span></span><br><span class="line"><span class="comment">// buffer[2] = 0xaa;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只要数组在控制台或者页面输出一定都是100进制</span></span><br><span class="line"><span class="comment">// console.log(buffer[2].toString(16));</span></span><br><span class="line"><span class="comment">// console.log(buffer.length);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// for (var i = 0; i &lt; buffer.length; i++) &#123;</span></span><br><span class="line"><span class="comment">//     console.log(buffer[i]);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Buffer.allocUnsafe(size)创建指定大小的Buffer，但是buffer中可能含有敏感数据</span></span><br><span class="line"><span class="comment">// var buffer = Buffer.allocUnsafe(10);</span></span><br><span class="line"><span class="comment">// console.log(buffer);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> buffer = Buffer.from(<span class="string">"我是一段文本数据"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(buffer.toString());</span><br></pre></td></tr></table></figure>

<h2 id="fs-模块"><a href="#fs-模块" class="headerlink" title="fs 模块"></a>fs 模块</h2><ul>
<li><p>在Node中，与文件系统的交互是非常重要的，服务器的本质就将本地的文件发送给远程的客户端</p>
</li>
<li><p>Node通过fs模块来和文件系统进行交互</p>
</li>
<li><p>该模块提供了一些标准文件访问API来打开、读取、写入文件、以及与其交互</p>
</li>
<li><p>要使用fs模块，首先需要对其进行加载 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="同步和异步调用"><a href="#同步和异步调用" class="headerlink" title="同步和异步调用"></a>同步和异步调用</h3><ul>
<li>fs模块中所有的操作都有两种形式可供选择<strong>同步</strong>和<strong>异步</strong></li>
<li>同步文件系统会阻塞程序的执行，也就是除非操作完毕，否则不会向下执行代码</li>
<li>异步文件系统不会阻塞程序的执行，而是在操作完成时，通过回调函数将结果返回</li>
</ul>
<h3 id="同步写入"><a href="#同步写入" class="headerlink" title="同步写入"></a>同步写入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   文件系统(File System）</span></span><br><span class="line"><span class="comment">      - 文件系统简单来说就是通过Node来操作系统中的文件</span></span><br><span class="line"><span class="comment">      - 使用文件系统，需要引入fs模块，fs是核心模块，直接引入不需要下载</span></span><br><span class="line"><span class="comment">   同步文件写入</span></span><br><span class="line"><span class="comment">      文件写入</span></span><br><span class="line"><span class="comment">       - 手动操作步骤</span></span><br><span class="line"><span class="comment">         1.打开文件</span></span><br><span class="line"><span class="comment">          fs.openSync(path,flags[,mode])</span></span><br><span class="line"><span class="comment">            - path 要打开的文件路径</span></span><br><span class="line"><span class="comment">            - flags 打开文件要做的操作类型</span></span><br><span class="line"><span class="comment">              r 只读的</span></span><br><span class="line"><span class="comment">              w 可写的</span></span><br><span class="line"><span class="comment">            - mode 设置文件操作权限，一般不传</span></span><br><span class="line"><span class="comment">            - 该方法会返回一个文件的描述作为结果，我们可以通过描述符来对文件进行各种操作</span></span><br><span class="line"><span class="comment">         2.向文件写入数据</span></span><br><span class="line"><span class="comment">          fs.writeSync(fd, string[, position[, encoding]])</span></span><br><span class="line"><span class="comment">          - fd 文件描述，需要传递要写入的文件描述符</span></span><br><span class="line"><span class="comment">          - string 要写入的内容</span></span><br><span class="line"><span class="comment">          - position 写入起始位置(一般不传)</span></span><br><span class="line"><span class="comment">          - encoding 写入编码(一般不传)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         3.保存并关闭文件</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">var</span> fd = fs.openSync(<span class="string">"hello.txt"</span>, <span class="string">"w"</span>);</span><br><span class="line"><span class="comment">// 向文件中写入内容</span></span><br><span class="line">fs.writeSync(fd,<span class="string">"今天的天气真不错~~~~"</span>);</span><br><span class="line"><span class="comment">// console.log(fd);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭文件</span></span><br><span class="line">fs.closeSync(fd);</span><br></pre></td></tr></table></figure>

<h3 id="异步写入"><a href="#异步写入" class="headerlink" title="异步写入"></a>异步写入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   异步文件写入</span></span><br><span class="line"><span class="comment">   fs.open(path[, flags[, mode]], callback)</span></span><br><span class="line"><span class="comment">   - 用于打开一个文件</span></span><br><span class="line"><span class="comment">   - 异步调用的方法，结果都是通过回调函数返回</span></span><br><span class="line"><span class="comment">   - 回调函数两个参数:</span></span><br><span class="line"><span class="comment">      err 错误对象，如果没有错误则为null</span></span><br><span class="line"><span class="comment">      fd  文件描述符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入fs模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="comment">// 打开文件</span></span><br><span class="line">fs.open(<span class="string">"hello2.txt"</span>, <span class="string">"w"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 判断是否出错</span></span><br><span class="line">    <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(fd);</span><br><span class="line">        <span class="comment">// 如果没有错误直接执行写入操作</span></span><br><span class="line">        fs.write(fd, <span class="string">"我是异步写入的内容~~~"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"写入成功"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 关闭文件</span></span><br><span class="line">            fs.close(fd, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"fs操作关闭"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="简单文件写入"><a href="#简单文件写入" class="headerlink" title="简单文件写入"></a>简单文件写入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   fs.writeFile(file, data[, options], callback) 异步</span></span><br><span class="line"><span class="comment">   fs.writeFileSync(file, data[, options]) 同步</span></span><br><span class="line"><span class="comment">     - file 要操作的文件路径</span></span><br><span class="line"><span class="comment">     - data 要写入的数据</span></span><br><span class="line"><span class="comment">     - options 选项可以对写入进行一些设置</span></span><br><span class="line"><span class="comment">     - callback 写入完成以后执行的函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入fs模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line">fs.writeFile(<span class="string">"hello3.txt"</span>, <span class="string">"这是writeFile写入的内容"</span>,&#123;<span class="attr">flag</span>:<span class="string">"w"</span>&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"写入成功"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="流式文件写入"><a href="#流式文件写入" class="headerlink" title="流式文件写入"></a>流式文件写入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   同步、异步、简单文件写入都不合适大文件的写入，性能较差，容易导致内存溢出</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 流式文件写入</span></span><br><span class="line"><span class="comment">// 创建一个可写流</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * fs.createWriteStream(path[, options])</span></span><br><span class="line"><span class="comment"> * - 可以用来创建一个可写流</span></span><br><span class="line"><span class="comment"> * - path,文件路径</span></span><br><span class="line"><span class="comment"> * - options 配置的参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ws = fs.createWriteStream(<span class="string">'hello3.txt'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以通过监听流的open和close事件来监听的打开和关闭</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * on(事件字符串，回调函数) 可以为对象绑定一个事件</span></span><br><span class="line"><span class="comment"> * once(事件字符串，回调函数 可以为我们的对象绑定一个一次性的事件，该事件将会触发一次之后自动失效</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">ws.once(<span class="string">"open"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"流打开了"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">ws.once(<span class="string">"close"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"流关闭了"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//通过ws向文件中输出内容</span></span><br><span class="line">ws.write(<span class="string">'窗前明月光\n'</span>);</span><br><span class="line">ws.write(<span class="string">'疑是地上霜\n'</span>);</span><br><span class="line">ws.write(<span class="string">'举头望明月\n'</span>);</span><br><span class="line">ws.write(<span class="string">'低头思故乡\n'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭流</span></span><br><span class="line">ws.end();</span><br></pre></td></tr></table></figure>

<h3 id="简单文件读取"><a href="#简单文件读取" class="headerlink" title="简单文件读取"></a>简单文件读取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   1.同步文件读取</span></span><br><span class="line"><span class="comment">   2.异步文件读取</span></span><br><span class="line"><span class="comment">   3.简单文件读取</span></span><br><span class="line"><span class="comment">   fs.readFile(path[, options], callback)</span></span><br><span class="line"><span class="comment">   fs.readFileSync(path[, options])</span></span><br><span class="line"><span class="comment">   - path文件路径</span></span><br><span class="line"><span class="comment">   - options 读取选项</span></span><br><span class="line"><span class="comment">   - callback回调函数，通过回调函数将读取的内容返回(err,data)</span></span><br><span class="line"><span class="comment">     err 错误对象</span></span><br><span class="line"><span class="comment">     data 读取到的数据，返回buffer对象</span></span><br><span class="line"><span class="comment">   4.流式文件读取</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">fs.readFile(<span class="string">'hello3.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">        <span class="comment">// 将我们读到内容写入到其他文件中</span></span><br><span class="line">        fs.writeFile(<span class="string">'hello4.txt'</span>,data,<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'输出成功'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="流式文件读取"><a href="#流式文件读取" class="headerlink" title="流式文件读取"></a>流式文件读取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   流式文件读取适用于一些比较大的文件，可以分多次文件读取内存中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个可读流</span></span><br><span class="line"><span class="keyword">var</span> rs = fs.createReadStream(<span class="string">'code.png'</span>);</span><br><span class="line"><span class="comment">//创建一个可写流</span></span><br><span class="line"><span class="keyword">var</span> ws = fs.createWriteStream(<span class="string">"a.png"</span>);</span><br><span class="line"><span class="comment">//监听流的开启和关闭</span></span><br><span class="line">rs.once(<span class="string">"open"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"可读流被打开了"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">rs.once(<span class="string">"close"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"可读流被关闭"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ws.once(<span class="string">"open"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"可写流被打开了"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ws.once(<span class="string">"close"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"可写流被关闭"</span>);</span><br><span class="line">    ws.end();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//如果要读取一个可读流中的数据，必须要为可读流绑定一个data事件，data事件绑定完毕，它会自动开始读取数据</span></span><br><span class="line">rs.on(<span class="string">"data"</span>, (data) =&gt; &#123;</span><br><span class="line">    <span class="comment">// console.log(data.length);</span></span><br><span class="line">    <span class="comment">// 将读取到的数据写入可写流中</span></span><br><span class="line">    ws.write(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>简化方式:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">   流式文件读取适用于一些比较大的文件，可以分多次文件读取内存中</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">var fs &#x3D; require(&#39;fs&#39;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;创建一个可读流</span><br><span class="line">var rs &#x3D; fs.createReadStream(&#39;code.png&#39;);</span><br><span class="line">&#x2F;&#x2F;创建一个可写流</span><br><span class="line">var ws &#x3D; fs.createWriteStream(&quot;b.png&quot;);</span><br><span class="line">&#x2F;&#x2F;监听流的开启和关闭</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;pipe()可以将我们可读流中的内容，直接输出到可写流中</span><br><span class="line">rs.pipe(ws);</span><br></pre></td></tr></table></figure>

<h3 id="fs其他操作"><a href="#fs其他操作" class="headerlink" title="fs其他操作"></a>fs其他操作</h3><ul>
<li><p>验证路径是否存在</p>
<p>fs.existsSync(path)</p>
</li>
<li><p>获取文件信息</p>
<p>fs.stat(path,callback)</p>
<p>fs.statSync(path)</p>
</li>
<li><p>删除文件</p>
<p>fs.unlink(path,callback)</p>
<p>fs.unlinkSync(path)</p>
</li>
<li><p>读取一个目录结构</p>
<p>fs.readdir(path[,options],callback)</p>
<p>fs.readdirSync(path,[,options])</p>
</li>
<li><p>截断文件</p>
<p>fs.truncate(path,len,callback)</p>
<p>fs.truncateSync(path,len)</p>
</li>
<li><p>建立目录</p>
<p>fs.mkdir(path[,mode],callback)</p>
<p>fs.mkdirSync(path[,mode])</p>
</li>
<li><p>删除目录</p>
<p>fs.rmdir(path,callback)<br>fs.rmdirSync(path)</p>
</li>
<li><p>重命名文件</p>
<p>fs.rename(oldPath,newPath,callback)<br>fs.renameSync(oldPath,newPath)</p>
</li>
<li><p>监视文件的修改</p>
<p>fs.watchFile(filename[,filename[,options],listener)</p>
</li>
</ul>
<h2 id="http-模块"><a href="#http-模块" class="headerlink" title="http 模块"></a>http 模块</h2><p>超文本传输协议（Hyper Text Transfer Protocol，HTTP）是一个简单的<font color="red">请求-响应</font>协议，它通常运行在<a href="https://baike.baidu.com/item/TCP/33012" target="_blank" rel="noopener">TCP</a>之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。请求和响应消息的头以<a href="https://baike.baidu.com/item/ASCII/309296" target="_blank" rel="noopener">ASCII</a>形式给出；而消息内容则具有一个类似<a href="https://baike.baidu.com/item/MIME/2900607" target="_blank" rel="noopener">MIME</a>的格式。这个简单模型是早期<a href="https://baike.baidu.com/item/Web/150564" target="_blank" rel="noopener">Web</a>成功的有功之臣，因为它使开发和部署非常地直截了当.</p>
<p>Node.js 中的 HTTP 接口旨在支持该协议的许多传统上难以使用的功能。 特别是大的，可能是块编码的消息。 接口从不缓冲整个请求或响应，因此用户能够流式传输数据。</p>
<p>HTTP 消息头由类似如下的对象表示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">'content-length'</span>: <span class="string">'123'</span>, <span class="comment">// 响应内容</span></span><br><span class="line">  <span class="string">'content-type'</span>: <span class="string">'text/plain'</span>, <span class="comment">// 内容类型</span></span><br><span class="line">  <span class="string">'connection'</span>: <span class="string">'keep-alive'</span>, <span class="comment">// 连接</span></span><br><span class="line">  <span class="string">'host'</span>: <span class="string">'mysite.com'</span>, <span class="comment">// 主机名</span></span><br><span class="line">  <span class="string">'accept'</span>: <span class="string">'*/*'</span> &#125; <span class="comment">// 同意接收文件的类型 * 代表所有类型</span></span><br></pre></td></tr></table></figure>

<h3 id="请求和响应"><a href="#请求和响应" class="headerlink" title="请求和响应"></a>请求和响应</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// http 超文本传输协议</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="comment">// 创建web服务器</span></span><br><span class="line"><span class="keyword">const</span> serve = http.createServer();</span><br><span class="line"><span class="comment">// 监听请求</span></span><br><span class="line"><span class="keyword">const</span> file = <span class="string">'hm-node/index.html'</span>;</span><br><span class="line"><span class="keyword">let</span> msg = <span class="string">''</span>;</span><br><span class="line">serve.on(<span class="string">'request'</span>, (req, res) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(req.headers); <span class="comment">// 获取请求头信息（对象）</span></span><br><span class="line">    <span class="built_in">console</span>.log(req.rawHeaders); <span class="comment">// 获取请求头信息（数组）</span></span><br><span class="line">    <span class="built_in">console</span>.log(req.httpVersion); <span class="comment">// 获取HTTP版本</span></span><br><span class="line">    <span class="built_in">console</span>.log(req.url); <span class="comment">// 获取请求路径（注:不包含网址）</span></span><br><span class="line"></span><br><span class="line">    fs.readFile(file, <span class="string">'utf-8'</span>, (err, data) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        msg = data;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 留心：有请求就必须有响应，没有响应网页无法打开</span></span><br><span class="line">    <span class="comment">// res.statusCode = 404; 状态码</span></span><br><span class="line">    <span class="comment">// res.statusMessage = 'Not Found' 响应信息</span></span><br><span class="line">    <span class="comment">// res.setHeader('Content-type':'text/html';charset=utf-8);</span></span><br><span class="line">    res.writeHead(<span class="number">200</span>, <span class="string">'IS Found'</span>, &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'text/html'</span></span><br><span class="line">    &#125;);</span><br><span class="line">    res.write(msg);</span><br><span class="line"></span><br><span class="line">    res.end();</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 端口在1-60000</span></span><br><span class="line">serve.listen(<span class="number">8080</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'服务启动成功:,请访问:http://localhost:8080'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 关闭服务器</span></span><br><span class="line"><span class="comment">// serve.close();</span></span><br></pre></td></tr></table></figure>

<h3 id="HTTP-content-type"><a href="#HTTP-content-type" class="headerlink" title="HTTP content-type"></a>HTTP content-type</h3><p>Content-Type（内容类型），一般是指网页中存在的 Content-Type，用于定义网络文件的类型和网页的编码，决定浏览器将以什么形式、什么编码读取这个文件，这就是经常看到一些 PHP 网页点击的结果却是下载一个文件或一张图片的原因。</p>
<p>Content-Type 标头告诉客户端实际返回的内容的内容类型。</p>
<p>语法格式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: text/html; charset=utf<span class="number">-8</span></span><br><span class="line">Content-Type: multipart/form-data; boundary=something</span><br></pre></td></tr></table></figure>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://www.runoob.com/wp-content/uploads/2014/06/F7E193D6-3C08-4B97-BAF2-FF340DAA5C6E.jpg" alt="HTTP content-type"></p>
<h4 id="常见的媒体格式类型如下："><a href="#常见的媒体格式类型如下：" class="headerlink" title="常见的媒体格式类型如下："></a>常见的媒体格式类型如下：</h4><ul>
<li>text/html ： HTML格式</li>
<li>text/plain ：纯文本格式</li>
<li>text/xml ： XML格式</li>
<li>image/gif ：gif图片格式</li>
<li>image/jpeg ：jpg图片格式</li>
<li>image/png：png图片格式</li>
</ul>
<h4 id="以application开头的媒体格式类型："><a href="#以application开头的媒体格式类型：" class="headerlink" title="以application开头的媒体格式类型："></a>以application开头的媒体格式类型：</h4><ul>
<li>application/xhtml+xml ：XHTML格式</li>
<li>application/xml： XML数据格式</li>
<li>application/atom+xml ：Atom XML聚合格式</li>
<li>application/json： JSON数据格式</li>
<li>application/pdf：pdf格式</li>
<li>application/msword ： Word文档格式</li>
<li>application/octet-stream ： 二进制流数据（如常见的文件下载）</li>
<li>application/x-www-form-urlencoded ： <form enctype>中默认的encType，form表单数据被编码为key/value格式发送到服务器（表单默认的提交数据的格式）</form></li>
</ul>
<h3 id="request-对象-和-response对象"><a href="#request-对象-和-response对象" class="headerlink" title="request 对象 和 response对象"></a>request 对象 和 response对象</h3><h4 id="request-对象"><a href="#request-对象" class="headerlink" title="request 对象"></a>request 对象</h4><ul>
<li>request 对象类型 &lt;http.IncomingMessage&gt;, 继承自stream.Readable</li>
<li>request 对象常用成员<ul>
<li><code>request.headers</code></li>
<li><code>request.rawHeaders</code></li>
<li><code>request.httpVersion</code></li>
<li><code>request.method</code></li>
<li><code>request.url</code></li>
</ul>
</li>
</ul>
<h4 id="response-对象"><a href="#response-对象" class="headerlink" title="response 对象"></a>response 对象</h4><ul>
<li><p>response 对象类型 &lt;http.ServerResponse&gt;</p>
</li>
<li><p>response 对象常用成员</p>
<ul>
<li><p><code>response.writeHead(statusCode[, statusMessage][, headers])</code></p>
<ol>
<li>This method must only be called once on a message and it must be called before response.end() is called.</li>
</ol>
<ul>
<li>这个方法在每次请求响应前都必须被调用（只能调用一次）。并且必须在end()方法调用前调用</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>2. If you call response.write() or response.end() before calling this, the implicit/mutable headers will be calculated and call this function for you.
- 如果在调用writeHead()方法之前调用了write() 或 end()方法，系统会自动帮你调用writeHead()方法，并且会生成默认的响应头

3. When headers have been set with response.setHeader(), they will be merged with any headers passed to response.writeHead(), with the headers passed to response.writeHead() given precedence.
- 如果通过 res.setHeader() 也设置了响应头，那么系统会将serHeader()设置的响应头和writeHead()设置的响应头合并。 并且writeHead()的设置优先</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例代码：</span></span><br><span class="line">res.writeHead(<span class="number">200</span>, <span class="string">'OK'</span>, &#123;</span><br><span class="line">  <span class="string">'Content-Type'</span>: <span class="string">'text/html; charset=utf-8'</span>,</span><br><span class="line">  <span class="string">'Content-Length'</span>: Buffer.byteLength(msg)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>response.write(chunk[, encoding][, callback])</code></p>
<ul>
<li>参数1：要写入的数据，可以是字符串或二进制数据，<strong>必填</strong>。</li>
<li>参数2：编码，默认是utf8，选填。</li>
<li>参数3：回调函数，选填。</li>
</ul>
</li>
<li><p><code>response.end([data][, encoding][, callback])</code></p>
<ul>
<li>结束响应。</li>
<li>This method signals to the server that all of the response headers and body have been sent; that server should consider this message complete. <strong><em>The method, <code>response.end()</code>, MUST be called on each response</em></strong>.</li>
</ul>
<ul>
<li>res.end()这个方法告诉服务器所有要发送的响应头和响应体都发送完毕了。可以人为这次响应结束了。</li>
<li>同时每次响应都必须调用该方法，用来结束响应</li>
</ul>
</li>
</ul>
<pre><code>* 参数1：结束响应前要发送的数据，选填。
* 参数2：编码，选填。
* 参数3：回调函数，选填。</code></pre><ul>
<li><p><code>response.setHeader(name, value)</code></p>
<ul>
<li>设置响应报文头</li>
</ul>
</li>
<li><p><code>response.statusCode</code></p>
<ul>
<li>设置或读取http响应码</li>
</ul>
</li>
<li><p><code>response.statusMessage</code></p>
<ul>
<li>设置或读取http响应状态消息</li>
</ul>
</li>
</ul>
<h3 id="案例：留言模块"><a href="#案例：留言模块" class="headerlink" title="案例：留言模块"></a>案例：留言模块</h3><p><strong>main.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="comment">// 引入字符查询模块 用于序列与反序列表单数据</span></span><br><span class="line"><span class="keyword">const</span> queryString = <span class="built_in">require</span>(<span class="string">'querystring'</span>);</span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'./public/js/util'</span>);</span><br><span class="line"><span class="comment">// 创建web服务器</span></span><br><span class="line"><span class="keyword">let</span> serve = http.createServer();</span><br><span class="line"><span class="keyword">const</span> BASE_URL = <span class="string">'hm-node/msg/'</span>;</span><br><span class="line"><span class="comment">//创建留言数据对象</span></span><br><span class="line"><span class="keyword">let</span> msgs = [&#123;</span><br><span class="line">        name: <span class="string">'张三'</span>,</span><br><span class="line">        content: <span class="string">"你好我是张三"</span>,</span><br><span class="line">        create_at: <span class="string">'2017-11-14 10:30:32'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">'李四'</span>,</span><br><span class="line">        content: <span class="string">"你好我是李四"</span>,</span><br><span class="line">        create_at: <span class="string">'2017-11-15 10:11:14'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">'王五'</span>,</span><br><span class="line">        content: <span class="string">"你好我是王五"</span>,</span><br><span class="line">        create_at: <span class="string">'2017-11-16 10:22:55'</span></span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(__dirname);</span><br><span class="line"><span class="built_in">console</span>.log(__filename);</span><br><span class="line"><span class="comment">// 监听端口</span></span><br><span class="line">serve.on(<span class="string">'request'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 获取当前请求路径</span></span><br><span class="line">    <span class="keyword">let</span> currentUrl = req.url;</span><br><span class="line">    <span class="comment">// 判断当前路劲</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (currentUrl === <span class="string">'/'</span>) &#123;</span><br><span class="line">        fs.readFile(path.join(__dirname, <span class="string">'./view/index.html'</span>), <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">            res.writeHead(<span class="number">200</span>, <span class="string">'IS Found'</span>, &#123;</span><br><span class="line">                <span class="string">'Content-Type'</span>: <span class="string">'text/html'</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">let</span> html = <span class="string">''</span>;</span><br><span class="line">            <span class="keyword">let</span> innerData = <span class="string">''</span>;</span><br><span class="line">            msgs.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                html += <span class="string">`&lt;li class="list-group-item"&gt;<span class="subst">$&#123;item.name&#125;</span>:说：<span class="subst">$&#123;item.content&#125;</span></span></span><br><span class="line"><span class="string">                &lt;span class="pull-right"&gt;<span class="subst">$&#123;item.create_at&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">                &lt;/li&gt;`</span></span><br><span class="line">                <span class="comment">// 将评论列表的数据替换</span></span><br><span class="line">                innerData = data.replace(<span class="string">'暂无数据'</span>, html);</span><br><span class="line">            &#125;)</span><br><span class="line">            res.write(innerData);</span><br><span class="line">            res.end();</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentUrl === <span class="string">'/add'</span>) &#123;</span><br><span class="line">        fs.readFile(BASE_URL + <span class="string">'view/add.html'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">            res.writeHead(<span class="number">200</span>, <span class="string">'IS Found'</span>, &#123;</span><br><span class="line">                <span class="string">'Content-Type'</span>: <span class="string">'text/html'</span></span><br><span class="line">            &#125;);</span><br><span class="line">            res.write(data);</span><br><span class="line">            res.end();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentUrl.indexOf(<span class="string">'/public'</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 静态资源不需要 设置Content-Type类型 浏览器自动解析</span></span><br><span class="line">        <span class="built_in">console</span>.log(currentUrl);</span><br><span class="line">        fs.readFile(path.join(__dirname, currentUrl), <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">            res.write(data);</span><br><span class="line">            res.end();</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentUrl.indexOf(<span class="string">'/doadd'</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 判断表单提交</span></span><br><span class="line">        <span class="comment">// 1.接收数据</span></span><br><span class="line">        <span class="comment">// 2.存储数据</span></span><br><span class="line">        <span class="comment">// 3.跳转</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> reqData = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">if</span> (req.method == <span class="string">'POST'</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> postDate = <span class="string">''</span>;</span><br><span class="line">            <span class="comment">// 注册data事件接收数据（每当收到一段表单提交的数据，该方法会执行一次）</span></span><br><span class="line">            req.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// chunk 默认是一个二进制数据，和 data 拼接会自动 toString</span></span><br><span class="line">                postDate += chunk;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// 当接收表单提交的数据完毕之后，就可以进一步处理了</span></span><br><span class="line">            <span class="comment">//注册end事件，所有数据接收完成会执行一次该方法</span></span><br><span class="line">            req.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">let</span> obj = queryString.parse(postDate);</span><br><span class="line">                msgs.unshift(obj);</span><br><span class="line">                <span class="comment">// 301：永久重定向。当返回的状态码是301时，浏览器需要重新发送一个HTTP请求，到服务器返回的新地址。</span></span><br><span class="line">                <span class="comment">// 320: </span></span><br><span class="line">                res.statusCode = <span class="number">302</span>;</span><br><span class="line">                res.setHeader(<span class="string">'Location'</span>, <span class="string">'/'</span>);</span><br><span class="line">                res.end();</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> obj = url.parse(req.url, <span class="literal">true</span>).query;</span><br><span class="line">            obj.create_at = util.formartTime();</span><br><span class="line">            msgs.unshift(obj);</span><br><span class="line">            <span class="built_in">console</span>.log(obj);</span><br><span class="line">            <span class="comment">// 301：永久重定向。当返回的状态码是301时，浏览器需要重新发送一个HTTP请求，到服务器返回的新地址。</span></span><br><span class="line">            <span class="comment">// 320: </span></span><br><span class="line">            res.statusCode = <span class="number">302</span>;</span><br><span class="line">            res.setHeader(<span class="string">'Location'</span>, <span class="string">'/'</span>);</span><br><span class="line">            res.end();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fs.readFile(BASE_URL + <span class="string">'view/404.html'</span>, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">            res.writeHead(<span class="number">200</span>, <span class="string">'IS Found'</span>, &#123;</span><br><span class="line">                <span class="string">'Content-Type'</span>: <span class="string">'text/html'</span></span><br><span class="line">            &#125;);</span><br><span class="line">            res.write(data);</span><br><span class="line">            res.end();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口</span></span><br><span class="line">serve.listen(<span class="number">8080</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'启动成功，请访问: http:localhost:8080'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a href="https://gitee.com/yuncai_1_2933909306/node-http-demo" target="_blank" rel="noopener">node http demo: node.js http 留言发布小模块 (gitee.com)</a></p>
<h2 id="url模块"><a href="#url模块" class="headerlink" title="url模块"></a>url模块</h2><p>get请求时，用户请求的参数是在request的url属性中，纯字符串，使用起来并不方便</p>
<p>url模块可以更方便地解析用户请求的get参数</p>
<h3 id="具体使用"><a href="#具体使用" class="headerlink" title="具体使用"></a>具体使用</h3><ol>
<li>加载模块 <code>var url = require(&#39;url&#39;);</code></li>
<li>调用<code>parse()</code>方法解析</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">url.parse(urlString[, parseQueryString[, slashesDenoteHost]]);</span><br><span class="line"><span class="keyword">var</span> urlObj = url.parse(reqUrl, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// url对象的pathname属性，获取不包含查询字符串的url</span></span><br><span class="line"><span class="comment">// url对象的query属性中包含的就是请求字符串的键值对对象</span></span><br></pre></td></tr></table></figure>
            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/Temple.mp3'></li>
                
                    
            </ul>
            
                        
            
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/img/author.jpg" height=300 width=300></img>
                    <p>Liyi</p>
                    <span>There is no dark magic in the computer world</span>
                    <dl>
                        
                            
                            
                            
                        
                        
                    </dl>
                </div>
                <ul>
                    <li><a href="/">179 <p>文章</p></a></li>
                    <li><a href="/categories">33 <p>分类</p></a></li>
                    <li><a href="/tags">69 <p>标签</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>目录</h4>
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Node-js简介"><span class="toc-number">1.</span> <span class="toc-text">Node.js简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#作用"><span class="toc-number">1.1.</span> <span class="toc-text">作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模块化系统"><span class="toc-number">2.</span> <span class="toc-text">模块化系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ECMAScript标准缺陷"><span class="toc-number">2.1.</span> <span class="toc-text">ECMAScript标准缺陷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模块化"><span class="toc-number">2.2.</span> <span class="toc-text">模块化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CommonJS-模块规范"><span class="toc-number">2.3.</span> <span class="toc-text">CommonJS 模块规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#包-package"><span class="toc-number">2.4.</span> <span class="toc-text">包 package</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NPM-Node-Package-Manager"><span class="toc-number">3.</span> <span class="toc-text">NPM(Node Package Manager)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#npm命令"><span class="toc-number">3.1.</span> <span class="toc-text">npm命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm源管理"><span class="toc-number">3.2.</span> <span class="toc-text">npm源管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#“模块”（Modules）和”包”（Packages）的区别"><span class="toc-number">3.3.</span> <span class="toc-text">“模块”（Modules）和”包”（Packages）的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm-包自定义发布"><span class="toc-number">3.4.</span> <span class="toc-text">npm 包自定义发布</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm-版本号形式"><span class="toc-number">3.5.</span> <span class="toc-text">npm 版本号形式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Buffer-模块"><span class="toc-number">4.</span> <span class="toc-text">Buffer 模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fs-模块"><span class="toc-number">5.</span> <span class="toc-text">fs 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#同步和异步调用"><span class="toc-number">5.1.</span> <span class="toc-text">同步和异步调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#同步写入"><span class="toc-number">5.2.</span> <span class="toc-text">同步写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#异步写入"><span class="toc-number">5.3.</span> <span class="toc-text">异步写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简单文件写入"><span class="toc-number">5.4.</span> <span class="toc-text">简单文件写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#流式文件写入"><span class="toc-number">5.5.</span> <span class="toc-text">流式文件写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简单文件读取"><span class="toc-number">5.6.</span> <span class="toc-text">简单文件读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#流式文件读取"><span class="toc-number">5.7.</span> <span class="toc-text">流式文件读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fs其他操作"><span class="toc-number">5.8.</span> <span class="toc-text">fs其他操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http-模块"><span class="toc-number">6.</span> <span class="toc-text">http 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#请求和响应"><span class="toc-number">6.1.</span> <span class="toc-text">请求和响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-content-type"><span class="toc-number">6.2.</span> <span class="toc-text">HTTP content-type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request-对象-和-response对象"><span class="toc-number">6.3.</span> <span class="toc-text">request 对象 和 response对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#案例：留言模块"><span class="toc-number">6.4.</span> <span class="toc-text">案例：留言模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#url模块"><span class="toc-number">7.</span> <span class="toc-text">url模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#具体使用"><span class="toc-number">7.1.</span> <span class="toc-text">具体使用</span></a></li></ol></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
<script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var a=0;a<r.length;a++)t=r[a],0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}();var t,e}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2021
        <span class="gradient-text">
            Liyi
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.9.3" target="_blank" rel="noopener">v1.4.9.3</a></small>
        
        </br>
        
        
        
        <i class="gradient-text"></i>
        <span id="timeDate">载入天数...</span>
        <span id="times">载入时分秒...</span>
        <script>
            var now = new Date();
            function createtime() {
                var grt= new Date("01/05/2020 00:00:00");//此处修改你的建站时间或者网站上线时间
                now.setTime(now.getTime()+250);
                days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
                hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
                if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
                mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
                seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
                snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
                document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
                document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
            }
        setInterval("createtime()",250);
        </script>
        
        
    </p>


</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>


 
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>
 
<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>
 
<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
 
<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>
 
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>
   
<script src="/js/busuanzi.min.js"></script>

<script>
  $(document).ready(function () {
    if ($('span[id^="busuanzi_"]').length) {
      initialBusuanzi();
    }
  });
</script>
 
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
  

<script>
  function initialTyped() {
    var typedTextEl = $('.typed-text');
    if (typedTextEl && typedTextEl.length > 0) {
      var typed = new Typed('.typed-text', {
        strings: ['There is no dark magic in the computer world', '计算机世界没有黑魔法'],
        typeSpeed: 90,
        loop: true,
        loopCount: Infinity,
        backSpeed: 20,
      });
    }
  }

  if ($('.article-header') && $('.article-header').length) {
    $(document).ready(function () {
      initialTyped();
    });
  }
</script>

 
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var valine = new Valine();

  function initValine(path) {
    if (!path) path = window.location.pathname;
    let language = 'zh-CN';
    if (!language) {
      language = 'en';
    } else {
      language = language.toLowerCase();
    }
    valine.init({
      el: '#vcomments',
      appId: 'gsPFVcn0pcvQ6V1TeIkbYRzi-gzGzoHsz',
      appKey: '5qOf6uppzbXVEsrhqi7L1fhg',
      notify: 'false',
      verify: 'false',
      avatar: 'mp',
      placeholder: 'Leave your throughs behind~',
      visitor: 'true',
      path: path,
      lang: language,
    });
  }

  $(document).ready(function () {
    initValine();
  });
</script>



<!-- 引用依赖 -->
<script>document.write(aplayerconf)</script>


</html>
